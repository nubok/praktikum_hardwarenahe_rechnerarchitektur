\documentclass[10pt]{scrartcl}
\usepackage[latin1]{inputenc}
\usepackage{bibgerm}
\usepackage[english, ngerman]{babel}
\usepackage[babel]{csquotes}
\usepackage{cite}
\usepackage{amsmath} % for eqref
\usepackage{tabularx}
\author{Denis Dietze \and Wolfgang Keller \and Nico Linke \and Thomas Schulte}

\title{Protokoll Versuch E10/IT7}
\subtitle{Mikroprozessor -- Grundlagenversuch Z 80 (Z 84 C 0008)}
\begin{document}
\maketitle
\section{Studienkontrollfragen}

\subsection{Maschinenzyklus}

\subsubsection{Frage}

Was ist ein Maschinenzyklus?

\subsubsection{Antwort}

Laut \cite[S.~27]{KieserMeder86} ist ein \emph{Maschinenzyklus} durch die Gesamtzahl der Takte einer Grundfunktion definiert. Eine oder mehrere Maschinenzyklen bilden dann einen \emph{Instruktionszyklus}. Grundfunktionen bilden:
\begin{itemize}
\item Befehlscode lesen
\item Speicher lesen
\item Speicher schreiben
\item I/O lesen
\item I/O schreiben
\item Interruptbestätigung
\item CPU-interne Operation.
\end{itemize}

\subsection{Registerstruktur}

\subsubsection{Frage}

Beschreiben Sie die Registerstruktur der Z 80 CPU und erläutern Sie die Besonderheiten und Verwendungsmöglichkeiten der Register!

\subsubsection{Antwort}

Der Registersatz der Z 80 CPU besteht (vgl. \cite[S.~22ff]{KieserMeder86}) aus "`allgemeinen Registern"' und "`Spezialregistern"'. Die allgemeinen Register teilen sich weiter in zwei Registers"atze auf: einen Hauptregistersatz und einen Tauschregistersatz. Jeder dieser beiden Registers"atze enth"alt acht 8-Bit-Register, die wir mit A, F, B, C, D, E, H und L bzw. A', F', B', C', D', E', H' und L' bezeichnen.

Das Register A bzw. A' bezeichnen wir als "'Akkumulator"` und das Register F bzw. F' als "'Flagsregister"`. Diese beiden sind f"ur spezielle Aufgaben vorgesehen. Die anderen 6 allgemeinen Register werden f"ur die allgemeine Verwendung benutzt.

Die Registerpaare B-C, D-E und H-L lassen sich auch als 16-Bit-Registerpaar nutzen.

Mit einem Befehl lassen sich A und F durch den Inhalt der Tauschregister tauschen. Mit einem weiteren lassen sich die sechs Allzweckregister durch ihre Tauschregister ersetzen. Dies kann beispielsweise f"ur eine schnelle Interrupt-Verarbeitung eingesetzt werden, da das Austauschen dieser Register deutlich schneller ist, als den Inhalt der Register auf einen externen Stack zu retten, wie es beispielsweise auf X86-basierenden Architekturen h"aufig in Interrupt-Service-Routinen h"aufig getan wird.

Die \emph{Spezialregister} bestehen aus den zwei 8-Bit-Registern I (Interruptvektor-Register) und R (Refresh-Register), sowie vier 16-Bit-Registern: den zwei Index-Registern IX und IY, dem Stack Pointer SP und dem Program Counter PC.

Der Program Counter PC enth"alt die 16-Bit-Adresse des aktuellen Instruktions-Bytes. Er wird automatisch inkrementiert, wenn sein Inhalt auf den Adressbus geladen wird.

Der Stack Pointer SP enthält die Adresse der aktuellen Spitze des Stacks.

Die Indexregister IX und IY dienen als Basis zur indizierten Adressierung und zur 16-Bit-Datenmanipulation. 

Das Interruptvektor-Register I stellt in der Interrupt-Betriebsart IM2 das High Byte der Adresse der Interrupt Service Routine (ISR) bereit. Das Low Byte wird von dem interruptanordernden peripheren Element geliefert.

Vom Refresh-Register R werden nur die unteren 7 Bits verwendet und dient f"ur den Programmierer transparent zum regelm"a"sigen Auffrischen des Speichers. Es wird beim Holen einer Instruktion inkrementiert -- somit l"asst es sich als Instruktionsz"ahler f"ur M1-Zyklen benutzen. Seine Daten werden im M1-Zyklus als unterer Teil der Adresse zusammen mit dem RSFH-Signal ausgesendet.

\subsection{Daten- vs. Befehlsbytes}

\subsubsection{Frage}

Wodurch werden Daten- und Befehlsbytes unterschieden?

\subsubsection{Antwort}

???

\subsection{Steuersignale}

\subsubsection{Frage}

Erläutern Sie die Aufgaben der Steuersignale der Z 80 CPU!

\subsubsection{Antwort}

Wir unterscheiden drei Typen von Steuersignalen:

\paragraph{System Control} Umfasst M1, MREQ, IORQ, RD, WR und RFSH.

\paragraph{CPU Control} Umfasst HALT, WAIT, INT, NMI und RESET.

\paragraph{CPU Bus Control} Umfasst BUSRQ und BUSACK.

\begin{tabularx}{\textwidth}{|l|X|}
\hline
Signal & Bedeutung \\
\hline
M1 & Mit diesem Signal meldet die CPU, dass sie sich im Befehlsholzyklus befindet. Falls IORQ aktiv ist, dient es zur Interruptquittierung seitens der CPU. \\
MREQ & Zeigt eine Speicheroperation der CPU an. \\
IORQ & Kennzeichnet Datenverkehr zwischen CPU und dem durch den Adressbus adressieren E/A-Ger"at. \\
RD & Zeigt an, dass auf dem Speicher oder Peripherie Leseoperation ausgef"uhrt wird\\
WR & Ist aktiv, wenn der Datenbus g"ultige Daten f"ur eine Schreiboperation enth"alt. \\
RFSH & Falls es aktiv ist, bedeutet dies, dass die niederwertigsten Bits eine Refresh-Adresse f"ur dynamische Speicher benutzten\\
HALT & Kennzeichnet, dass CPU einen Halt-Befehl ausgef"uhrt hat. Zur Erl"auterung des HALT-Zustands, siehe  Abschnitt \ref{sec:halt_antwort}. \\
WAIT & Erlaubt Einf"ugen von Wartezyklen in die Lese- und Schreibzyklen der CPU mit dem Speicher un den E/A-Einheiten. Dient somit zur Synchronisation mit diesen. Wenn das Signal aktiv ist, zeigt dieses an, dass der angesprochene Speicher bzw. E/A-Baustein noch nicht bereit zur Daten"ubertragung ist \\
INT & Zur Bedeutung siehe Abschnitt \ref{sec:interrupt_antwort}. Es wird ein Interrupt ausgel"ost, sofern dieser freigegeben ist und BUSRQ \emph{nicht} aktiv ist. \\
NMI & Zur Bedeutung vergleiche Abschnitt \ref{sec:interrupt_antwort}. L"ost einen nicht maskierbaren Interrupt aus. \\
RESET & Bringt den Prozessor in den Anfangszustand. \\
BUSRQ & Dient zur Anforderung des CPU-Bussystems. Wird von einer Einheit geliefert, um DMA-Betrieb anzumelden. \\
BUSACK & Mit diesem Signal quittiert CPU die Anmeldung eines BUSRQ. Der Datenverkehr kann somit von einer DMA-Einheit gesteuert werden. \\
\hline
\end{tabularx}

(vgl. \cite[S.~25ff]{KieserMeder86})

\subsection{Interrupt}

\subsubsection{Frage}

Was ist ein Interrupt?

\subsubsection{Antwort}
\label{sec:interrupt_antwort}

Ein Interrupt ist eine asynchrone Unterbrechung eines gerade ausgef"uhrten Programms, damit der Prozessor auf bestimmte Forderungen reagieren kann. Gegen"uber einer zyklischen Abfrage (Polling) wird Zeit eingespart.

Interrupts erm"oglichen au"serdem die parallele Abarbeitung mehrerer Programme durch eine CPU, indem man durch Interrupts und geeignete Priorisierung die CPU auf die zu einem Zeitpunkt wichtigste Aufgabe lenkt (vgl. \cite[S.~70]{KieserMeder86}).

\subsection{Interruptmodi}

\subsubsection{Frage}

Erläutern Sie die drei möglichen Interruptmodi der Z 80 CPU!

\subsubsection{Antwort}

F"ur den maskierbaren Interrupt werden 3 Modi unterschieden (vgl. \cite[S.~75]{KieserMeder86}):

\paragraph{IM0} Das von der unterbrechenden Einheit auf dem Datenbus platzierte Wort wird als \emph{Befehl} betrachtet und ausgef"uhrt. 

\paragraph{IM1} Wenn INT anliegt, erfolgt ein Sprung zur Adresse \verb|0038h|. Dies ist "ahnlich dem NMI -- nur wird dort die Adresse \verb|0066h| verwendet.

\paragraph{IM2} Bei Anwendung dieses Modus baut der Programmierer eine Interruptvektor-Tabelle mit den Anfangsadressen der Interrupt-Service-Routinen (ISR) auf. Jede dieser Adressen umfasst 2 Bytes -- daher ist das von der unterbrechenden Einheit gelieferte Byte gerade. Dieses Byte bildet das untere Byte der Startadresse der ISR. Das obere Byte liefert das I-Register.

\subsection{Nichtmaskierbare vs. maskierbare Interrupts}

\subsubsection{Frage}

Erläutern Sie den Unterschied zwischen nichtmaskierbaren Interrupts (NMI) und
einem maskierbaren Interrupt!

\subsubsection{Antwort}

Laut \cite[S.~70]{KieserMeder86} besitzt die Z 80 CPU zwei Interrupteing"ange: INT und NMI.

Der nichtmaskierbare Interrupt (NMI) der besitzt die höhere Priorit"at und kann nicht per Programm gesperrt werden. Daher unterbricht die CPU das laufende Programm ausnahmslos, falls dieser Interrupt anliegt. Aus diesem Grund ist dieser im Allgemeinen f"ur sehr wichtige Ereignisse, wie Ausf"alle, Havarien und andere nicht vorhersehbare Ereignisse reserviert.

Der maskierbare Interrupt (INT) kann dagegen gezielt per Programm gesperrt und freigegeben werden. Eine Sperrung kann beispielsweise dann notwendig sein, wenn zwar eine Interruptserviceroutine niedriger Priorit"at abl"auft, aber eine Unterbrechung bestimmter Programmteile aufgrund des geforderten Echtzeitverhaltens nicht tragbar ist. In diesem Fall sperrt man in diesem Programmteil den maskierbaren Interrupt.

Nach einem Reset der CPU ist die Verarbeitung des maskierbaren Interrupts gesperrt. Durch den Befehl EI (enable interrupt) wird diese Sperre aufgehoben und durch DI (disable interrupt) gesetzt. 

\subsection{HALT-Zustand}

\subsubsection{Frage}

Wodurch ist der HALT-Zustand der Z 80 CPU gekennzeichnet?

\subsubsection{Antwort}
\label{sec:halt_antwort}

Laut ~\cite[S.~34]{KieserMeder86} ist der HALT-Zustand dadurch charakterisiert, dass während sich die CPU in diesem Zustand befindt, NOP-Befehle ausgeführt werden, deren Zweck der Refresh dynamischer Speicher ist.

Der HALT-Zustand kann von der CPU nur verlassen werden, wenn ein INT- oder NMI-Signal best"atigt wird.

\subsection{Adressbereich}

\subsubsection{Frage}

Wie groß ist der Adressbereich für anschließbare Speicher und Ein-/Ausgabe-Tore
der Z 80 CPU?

\subsubsection{Antwort}

Da 16 Adressleitungen zur Verf"gung stehe, ist der Speicherbereich prinzipiell bis zu $2^{16}~\textnormal{Byte}=65536~\textnormal{Byte}=64~KiB$ groß.

\subsection{Bidirektionaler Datentransfer}

\subsubsection{Frage}

Was bedeutet bidirektionaler Datentransfer?

\subsubsection{Antwort}

Laut ~\cite[S.~348]{KieserMeder86} versteht man unter einem bidirektionalen Datentransfer einen zeitmultiplexten Zweirichtungsbetrieb zur Signal"ubertragung.

\section{Versuchsaufgaben}

Als Notation zur Beantwortung der Aufgaben wollen wir Folgendes vereinbaren: wenn hinter einem Wert ein ${}^*$ erscheint, so soll dies bedeuten, dass der Wert in diesem Takt manuell durch uns auf den Wert gesetzt wurde.

\subsection{M1-Zyklus}

\subsubsection{Aufgabe}

Stellen Sie die für diesen Zyklus signifikanten Signale über den Taktimpulsen grafisch dar.
Überprüfen Sie die Wirkung der WAIT-, RESET- und BUSRQ-Signale.

\subsubsection{L"osung}

Es wird ein 00 (NOP) auf den Datenbus gelegt.

Zuerst führen wir das Programm aus, ohne das WAIT-, RESET- oder BUSRQ-Signal zu aktivieren.

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
1 & M1, MREQ, RD & \verb|0000| & \verb|00|${}^*$ \\
2 & M1, MREQ, RD & \verb|0000| & \verb|00|${}^*$ \\
3 & MREQ, RFSH & \verb|0000| & \verb|FF| \\
4 & RFSH & \verb|0000| & \verb|FF| \\
5 & M1, MREQ, RD & \verb|0001| & \verb|00|${}^*$ \\
\hline
\end{tabular}
\\

Nun aktivieren wir in diesem Takt das WAIT-Signal:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
5 & M1, MREQ, RD, WAIT & \verb|0001| & \verb|00|${}^*$ \\
6 & M1, MREQ, RD, WAIT & \verb|0001| & \verb|00|${}^*$ \\
7 & M1, MREQ, RD, WAIT & \verb|0001| & \verb|00|${}^*$ \\
8 & M1, MREQ, RD, WAIT & \verb|0001| & \verb|00|${}^*$ \\
9 & M1, MREQ, RD, WAIT & \verb|0001| & \verb|00|${}^*$ \\
\hline
\end{tabular}
\\

Wie man sieht, führt dies dazu \ldots (TODO).

Als folgenden Schritt deaktivieren wir WAIT und aktivieren RESET:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
9 & M1, MREQ, RD, RESET & \verb|0001| & \verb|00|${}^*$ \\
10 & M1, MREQ, RD, RESET & \verb|0001| & \verb|00|${}^*$ \\
11 & MREQ, RFSH, RESET & \verb|0001| & \verb|FF| \\
12 & RESET & \verb|FFFF| & \verb|FF| \\
13 & RESET & \verb|FFFF| & \verb|FF| \\
14 & RESET & \verb|FFFF| & \verb|FF| \\
\hline
\end{tabular}
\\

Nun deaktivieren wir wieder RESET:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
14 & - & \verb|FFFF| & \verb|FF| \\
15 & - & \verb|FFFF| & \verb|FF| \\
16 & - & \verb|FFFF| & \verb|FF| \\
17 & - & \verb|FFFF| & \verb|FF| \\
18 & M1, MREQ, RD & \verb|0000| & $31$ \\
\hline
\end{tabular}
\\

Die 31, die in Takt 18 auf dem Datenbus liegt, ist der nach dem Reset vorliegende, zufällige Wert der Speicherzelle \verb|0000|.

Nun zum BUSREQ-Signal:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
18 & M1, MREQ, RD, BUSREQ & \verb|0000| & \verb|00|${}^*$ \\
19 & M1, MREQ, RD, BUSREQ & \verb|0000| & \verb|00|${}^*$ \\
20 & MREQ, RFSH, BUSREQ & \verb|0000| & \verb|FF| \\
21 & RFSH, BUSREQ & \verb|0001| & \verb|FF| \\
22 & BUSREQ, BUSACK & \verb|FFFF| & \verb|FF| \\
23 & BUSREQ, BUSACK & \verb|FFFF| & \verb|FF| \\
24 & BUSREQ, BUSACK & \verb|FFFF| & \verb|FF| \\
\hline
\end{tabular}
\\

Nun deaktivieren wir wieder BUSREQ:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
24 & BUSACK & \verb|FFFF| & \verb|FF| \\
25 & - & \verb|FFFF| & \verb|FF| \\
26 & M1, MREQ, RD & \verb|0001| & \verb|00|${}^*$ \\
\hline
\end{tabular}

\subsection{Speicher-Lese-/Schreib-Zyklus}

\subsubsection{Aufgabe}

Nehmen Sie entsprechend o. a. Muster das Zyklusdiagramm für einen Speicher-Lese-/Schreib-
Zyklus auf.

\subsubsection{L"osung}

Wir nutzen den Befehl "`LD A, n"' mit n=\verb|42h| (\verb|3E 42|), um in den Akkumulator den Wert \verb|42h|  zu laden:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
1 & M1, MREQ, RD & \verb|0000| & \verb|3E|${}^*$ \\
2 & M1, MREQ, RD & \verb|0000| & \verb|3E|${}^*$ \\
3 & MREQ, RFSH & \verb|0000| & \verb|FF| \\
4 & RFSH & \verb|0000| & \verb|FF| \\
5 & MREQ, RD & \verb|0001| & \verb|42|${}^*$ \\
6 & MREQ, RD & \verb|0001| & \verb|42|${}^*$ \\
7 & - & \verb|0001| & \verb|FF| \\
\hline
\end{tabular}
\\

Nun nutzen wir den Befehl "`LD (n, n), A"' mit (n, n)=\verb|8000h| (\verb|32 00 80|), um den Wert des Akkumulators (\verb|42h|) in der Speicheradresse \verb|8000h| abzulegen:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
8 & M1, MREQ, RD & \verb|0002| & \verb|32|${}^*$ \\
9 & M1, MREQ, RD & \verb|0000| & \verb|32|${}^*$ \\
10 & MREQ, RFSH & \verb|0001| & \verb|FF| \\
11 & RFSH & \verb|0001| & \verb|FF| \\
12 & MREQ, RD & \verb|0003| & \verb|00|${}^*$ \\
13 & MREQ, RD & \verb|0003| & \verb|00|${}^*$ \\
14 & - & \verb|0003| & \verb|FF| \\
15 & MREQ, RD & \verb|0004| & \verb|80|${}^*$ \\
16 & MREQ, RD & \verb|0004| & \verb|80|${}^*$ \\
17 & - & \verb|0003| & \verb|FF| \\
18 & MREQ & \verb|8000| & 42 \\
19 & MREQ, WR & \verb|8000| & 42 \\
20 & - & \verb|8000| & 42 \\
\hline
\end{tabular}
\\

Im Folgenden lesen wir den Wert der Speicherzelle \verb|8000h| wieder aus -- dies geschieht mit dem Befehl "`LD A, (n, n)"' (\verb|3A 00 80|):

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
21 & M1, MREQ, RD & \verb|0005| & \verb|3A|${}^*$ \\
22 & M1, MREQ, RD & \verb|0005| & \verb|3A|${}^*$ \\
23 & MREQ, RFSH & \verb|0002| & \verb|FF| \\
24 & RFSH & \verb|0002| & \verb|FF| \\
25 & MREQ, RD & \verb|0006| & \verb|00|${}^*$ \\
26 & MREQ, RD & \verb|0006| & \verb|00|${}^*$ \\
27 & - & \verb|0006| & \verb|FF| \\
28 & MREQ, RD & \verb|0007| & \verb|80|${}^*$ \\
29 & MREQ, RD & \verb|0007| & \verb|80|${}^*$ \\
30 & - & \verb|0007| & \verb|FF| \\
31 & MREQ, RD & \verb|8000| & 42 \\
32 & MREQ, RD & \verb|8000| & 42 \\
33 & - & \verb|8000| & FF \\
34 & M1, MREQ, RD & \verb|0008| & \verb|00|${}^*$ \\
\hline
\end{tabular}
\\

\subsection{E/A-Zyklus}

\subsubsection{Aufgabe}

Programmieren Sie einen E/A-Zyklus und nehmen Sie das Zyklus-Diagramms auf. Halten Sie
die Inhalte des Adress- und Datenbusses schriftlich fest.

\subsubsection{L"osung}

Analog zur vorherigen Aufgabe speichern wir diesmal \verb|56h| im Akkumulator:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
1 & M1, MREQ, RD & \verb|0000| & \verb|3E|${}^*$ \\
2 & M1, MREQ, RD & \verb|0000| & \verb|3E|${}^*$ \\
3 & MREQ, RFSH & \verb|0000| & \verb|FF| \\
4 & RFSH & \verb|0000| & \verb|FF| \\
5 & MREQ, RD & \verb|0001| & \verb|42|${}^*$ \\
6 & MREQ, RD & \verb|0001| & \verb|42|${}^*$ \\
7 & - & \verb|0001| & \verb|FF| \\
\hline
\end{tabular}
\\

Nun benutzen wir den Befehl "ÒUT n"' mit n=\verb|67h| (\verb|D3 67|), um den Wert des Akkumulators auf Port \verb|67h| auszugeben:

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
8 & M1, MREQ, RD & \verb|0002| & \verb|D3|${}^*$ \\
9 & M1, MREQ, RD & \verb|0002| & \verb|D3|${}^*$ \\
10 & MREQ, RFSH & \verb|0001| & \verb|FF| \\
11 & RFSH & \verb|0001| & \verb|FF| \\
12 & MREQ, RD & \verb|0003| & \verb|67|${}^*$ \\
13 & MREQ, RD & \verb|0003| & \verb|67|${}^*$ \\
14 & - & \verb|0003| & \verb|FF| \\
15 & - & \verb|5667| & \verb|56| \\
16 & IORQ, WR & \verb|5667| & \verb|56| \\
17 & IORQ, WR & \verb|5667| & \verb|56| \\
18 & - & \verb|5667| & \verb|56| \\
\hline
\end{tabular}
\\

Zu der letzten Zeilen eine Bemerkung: es gibt nur 256 Ports, jedoch hat der Adressbus 16 Bits. Daher wird nur das untere Byte des Adressbusses verwendet -- im oberen d"urfte ein beliebiger Wert stehen, da er ignoriert wird. In der Praxis wird im oberen Byte der Wert des Akkumulators gesendet.

Nun zum Lesen aus einem Port (wir haben uns f"ur Port \verb|13h| entschieden): hierf"ur gibt es den Befehl \verb|IN n| (f"ur genanntes n=\verb|13h| ist es \verb|DB 13|).

\begin{tabular}[t]{|l|l|l|l|}
\hline
Takt & Kontrollbus & Adressbus & Datenbus \\
\hline
19 & M1, MREQ, RD & \verb|0004| & \verb|DB|${}^*$ \\
20 & M1, MREQ, RD & \verb|0004| & \verb|DB|${}^*$ \\
21 & MREQ, RFSH & \verb|0002| & \verb|FF| \\
22 & RFSH & \verb|0002| & \verb|FF| \\
23 & MREQ, RD & \verb|0005| & \verb|13|${}^*$ \\
24 & MREQ, RD & \verb|0005| & \verb|13|${}^*$ \\
25 & - & \verb|0005| & \verb|FF| \\
26 & - & \verb|5613| & \verb|FF| \\
27 & IORQ, RD & \verb|5613| & \verb|FF| \\
28 & IORQ, RD & \verb|5613| & \verb|FF| \\
29 & - & \verb|5667| & \verb|FF| \\
30 & M1, MREQ, RD & \verb|0006| & \verb|00|${}^*$ \\
\hline
\end{tabular}
\\

Da kein Gerät an Port \verb|13h| angeschlossen ist, wird in den Takten 26 bis 28 auf dem Datenbus nur \verb|FF| "ubertragen. Wir h"atten mittels des Kontrollpanels den Wert "andern k"onnen, haben jedoch keinen Gebrauch davon gemacht.

\subsection{Interruptbehandlungszyklus}

\subsubsection{Aufgabe}

Nehmen Sie das Zyklusdiagramm auf und charakterisieren Sie die Unterschiede zu einem
normalen M1-Zyklus!

\paragraph{Hinweis} Vor Beginn ist das Interruptfreigabe-Flip-Flop durch einen entsprechenden Befehl
zu setzten!

\subsubsection{L"osung}

\subsection{NMI-Routine}

\subsubsection{Aufgabe}

Setzten Sie während eines M1-Zyklus ein NMI-Signal und halten Sie den weiteren Verlauf
fest!

\subsubsection{L"osung}

\subsection{HALT-Zustand}

\subsubsection{Aufgabe}

Programmieren Sie einen Software-HALT und setzten Sie das Programm mit den vorhandenen
Möglichkeiten fort.

\subsubsection{L"osung}

\subsection{RESTART-Befehl}

\subsubsection{Aufgabe}

Arbeiten Sie einen RST-38H-Befehl ab und halten Sie die Adress- und Datenbussignale fest.

\subsubsection{L"osung}

\subsection{Registeroperationen}

\subsubsection{Aufgabe}

Führen Sie eine Operation mit den zugänglichen Registern der Z 80 CPU nach eigener Wahl
aus.

\subsubsection{L"osung}

\bibliography{E10}{}
\bibliographystyle{geralpha}

\end{document}